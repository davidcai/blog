<?xml version="1.0" encoding="utf-8" standalone="yes" ?>
<rss version="2.0" xmlns:atom="http://www.w3.org/2005/Atom">
  <channel>
    <title>Test on David Cai | Blog</title>
    <link>http://davidcai.github.io/blog/categories/test/</link>
    <description>Recent content in Test on David Cai | Blog</description>
    <generator>Hugo -- gohugo.io</generator>
    <lastBuildDate>Thu, 10 Sep 2015 00:00:00 +0000</lastBuildDate>
    <atom:link href="http://davidcai.github.io/blog/categories/test/index.xml" rel="self" type="application/rss+xml" />
    
    <item>
      <title>Angular Tutorial Videos</title>
      <link>http://davidcai.github.io/blog/posts/angular-tutorials/</link>
      <pubDate>Thu, 10 Sep 2015 00:00:00 +0000</pubDate>
      
      <guid>http://davidcai.github.io/blog/posts/angular-tutorials/</guid>
      <description>

&lt;p&gt;Here is my collection of free tutorial videos. Could be really helpful for people new to Angular.&lt;/p&gt;

&lt;h1 id=&#34;1-shaping-up-with-angular-js&#34;&gt;1. Shaping up with Angular JS&lt;/h1&gt;

&lt;p&gt;Gregg Pollack&amp;rsquo;s &amp;ldquo;Shaping up with Angular.js&amp;rdquo; from codeschool.com has been there for a while. It is one of the tutorials that have the best intro. The series covers Angular setup, binding, controllers, directives, filters, form handling, and services. The best part is its challenges after each chapter.&lt;/p&gt;

&lt;p&gt;&lt;a class=&#34;img-og&#34; href=&#34;http://campus.codeschool.com/courses/shaping-up-with-angular-js/intro&#34; target=&#34;_blank&#34;&gt;
  &lt;img src=&#34;http://projector.codeschool.com/videos/6ab6e1ab/thumbnail&#34;&gt;
&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;The tutorial might be a bit confusing to navigate. Make sure you scroll all the way to the top, and click the &amp;ldquo;START COURSE&amp;rdquo; button, which will list all the chapters. It&amp;rsquo;s recommended starting from the beginning in the order. The tutorial walks you through building a gem store project. Skipping the previous chapters might make yourself lost.&lt;/p&gt;

&lt;p&gt;At the bottom right corner, you will find the &amp;ldquo;START CHALLENGES&amp;rdquo; button which brings you to the exercises. The challenge mode gives you an inline editor to play around the code. Your editing will be immediately reflected in the &amp;ldquo;Preview&amp;rdquo; panel. Pretty handy for learn by play.&lt;/p&gt;

&lt;p&gt;The tutorial has a sequel &amp;ndash; &amp;ldquo;Staying Sharp with Angular.js&amp;rdquo;. Alyssa Nicoll will be your mentor. The first chapter covers router. It is free. The following chapters might need payment to unlock.&lt;/p&gt;

&lt;p&gt;Free tutorial: &lt;a href=&#34;http://campus.codeschool.com/courses/shaping-up-with-angular-js/intro&#34;&gt;Shaping up with Angular.js&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;Sequel: &lt;a href=&#34;https://www.codeschool.com/courses/staying-sharp-with-angular-js&#34;&gt;Staying Sharp with Angular.js&lt;/a&gt;&lt;/p&gt;

&lt;h1 id=&#34;2-egghead-io-new-to-angular-js&#34;&gt;2. Egghead IO - New to Angular JS?&lt;/h1&gt;

&lt;p&gt;Egghead is famous of its bite-sized videos. Each video can be consumed within 10 min. The entire tutorial is very easy to navigate. The noteworthy is that each short clip has its own discussion section. You might very well learn something new from these informative discussions.&lt;/p&gt;

&lt;p&gt;&lt;a class=&#34;img-og&#34; href=&#34;https://egghead.io/articles/new-to-angularjs-start-learning-here?utm_content=buffer3b17a&amp;utm_medium=social&amp;utm_source=twitter.com&amp;utm_campaign=buffer&#34; target=&#34;_blank&#34;&gt;
  &lt;img src=&#34;http://www.infragistics.com/community/cfs-file.ashx/__key/CommunityServer.Blogs.Components.WeblogFiles/brent_5F00_schooley.metablogapi/2061.logo_5F00_3309A602.png&#34;&gt;
&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;This tutorial spent a lot of inks on directives and isolated scopes, which are essential to writing better components in Angular JS.&lt;/p&gt;

&lt;p&gt;Egghead.io is a powerhouse for all Angular learning. If you&amp;rsquo;d like to adventure to specific topics or advanced usage, check out this list of &lt;a href=&#34;https://egghead.io/technologies/angularjs&#34;&gt;all Angular lessons&lt;/a&gt;.&lt;/p&gt;

&lt;p&gt;Egghead.io: &lt;a href=&#34;https://egghead.io/articles/new-to-angularjs-start-learning-here?utm_content=buffer3b17a&amp;amp;utm_medium=social&amp;amp;utm_source=twitter.com&amp;amp;utm_campaign=buffer&#34;&gt;New to AngularJS?&lt;/a&gt;&lt;/p&gt;

&lt;h1 id=&#34;3-angular-youtube-channel&#34;&gt;3. Angular Youtube Channel&lt;/h1&gt;

&lt;p&gt;For people who prefer picking their own lessons, Angular&amp;rsquo;s Youtube channel is the gold mine.&lt;/p&gt;

&lt;p&gt;&lt;a class=&#34;img-og&#34; href=&#34;https://www.youtube.com/user/angularjs&#34; target=&#34;_blank&#34;&gt;
  &lt;img src=&#34;http://codegeekz.com/wp-content/uploads/AngularJS-YouTube.jpeg&#34;&gt;
&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;Strictly speaking, the channel itself is not a tutorial site, however, here, you will find great videos covering wide range of topics. I will give you some examples:&lt;/p&gt;

&lt;ul&gt;
&lt;li&gt;Julie Ralph&amp;rsquo;s video on Angular &lt;a href=&#34;https://www.youtube.com/watch?v=vvxsWokQblk&#34;&gt;Protractor test&lt;/a&gt; and &lt;a href=&#34;https://www.youtube.com/watch?v=BvAeabvZ61o&#34;&gt;more&lt;/a&gt;.&lt;/li&gt;
&lt;li&gt;Vojta Jina&amp;rsquo;s &lt;a href=&#34;https://youtu.be/rB5b67Cg6bc&#34;&gt;Testing Directives&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;&lt;a href=&#34;https://youtu.be/dF_ObGgzGE8&#34;&gt;Reusable Components in Angular: Design patterns, transclusion, and more&lt;/a&gt;&lt;/li&gt;
&lt;/ul&gt;

&lt;p&gt;Youtube &lt;a href=&#34;https://www.youtube.com/user/angularjs&#34;&gt;Angular channel&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;Other Youtube channels related to Angular JS:&lt;/p&gt;

&lt;ul&gt;
&lt;li&gt;&lt;a href=&#34;https://www.youtube.com/channel/UCm9iiIfgmVODUJxINecHQkA&#34;&gt;ng-conf channel&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;&lt;a href=&#34;https://www.youtube.com/channel/UCBWXtgwaUqyvI50euTYlUWQ&#34;&gt;Angular U channel&lt;/a&gt;&lt;/li&gt;
&lt;/ul&gt;

&lt;h1 id=&#34;4-others&#34;&gt;4. Others&lt;/h1&gt;

&lt;ul&gt;
&lt;li&gt;PluralSight.com &lt;a href=&#34;http://www.pluralsight.com/search/?searchTerm=angular&#34;&gt;Angular courses&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;&lt;a href=&#34;https://youtu.be/UlvCbnKAH3g&#34;&gt;John Papa - 10 AngularJS Patterns&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;David Mosher&amp;rsquo;s &lt;a href=&#34;https://www.youtube.com/watch?v=Ty8XcASK9js&#34;&gt;Advanced Directives&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;Now, some silly stuff &lt;a href=&#34;https://youtu.be/M_Wp-2XA9ZU&#34;&gt;ng-wat&lt;/a&gt; inspired by &lt;a href=&#34;https://youtu.be/FqhZZNUyVFM&#34;&gt;JS Wat&lt;/a&gt;&lt;/li&gt;
&lt;/ul&gt;

&lt;p&gt;&lt;br/&gt;&lt;/p&gt;
</description>
    </item>
    
    <item>
      <title>A Simple A/B Testing Service</title>
      <link>http://davidcai.github.io/blog/posts/a-simple-ab-testing-service/</link>
      <pubDate>Sun, 16 Aug 2015 00:00:00 +0000</pubDate>
      
      <guid>http://davidcai.github.io/blog/posts/a-simple-ab-testing-service/</guid>
      <description>&lt;p&gt;A very simple A/B testing service implemented in Angular &amp;ndash; abTestService:&lt;/p&gt;

&lt;pre&gt;&lt;code class=&#34;language-js&#34;&gt;;(function() {
  &#39;use strict&#39;;

  angular
    .module(&#39;abTest&#39;, [])
    .factory(&#39;abTestService&#39;, abTestService)
  ;


  function abTestService() {
    return {
      pick: pick
    };

    function pick() {
      var i = Math.floor(Math.random() * arguments.length);
      return arguments[i];
    }
  }

})();
&lt;/code&gt;&lt;/pre&gt;

&lt;p&gt;abTestService has only one method &amp;ndash; pick, which is to evenly pick one from many choices:&lt;/p&gt;

&lt;pre&gt;&lt;code class=&#34;language-js&#34;&gt;// a or b. 50% vs 50% chances
abTestService.pick(&#39;a&#39;, &#39;b&#39;);

// apple or orange. 50% vs 50%
abTestService.pick(&#39;apple&#39;, &#39;orange&#39;);

// a, b, or c. 1/3 vs 1/3 vs 1/3
abTestService.pick(&#39;a&#39;, &#39;b&#39;, &#39;c&#39;);

// a or b. 2/3 vs 1/3
abTestService.pick(&#39;a&#39;, &#39;a&#39;, &#39;b&#39;);
&lt;/code&gt;&lt;/pre&gt;

&lt;p&gt;Here is an example of how to use abTestService with UI Router:&lt;/p&gt;

&lt;pre&gt;&lt;code class=&#34;language-js&#34;&gt;;(function() {
  &#39;use strict&#39;;

  angular
    .module(&#39;myApp&#39;, [
      &#39;abTest&#39;,
      &#39;ui.router&#39;
    ])
    .config(configRoute)
  ;


  function configRoute($stateProvider) {
    $stateProvider.state(&#39;home&#39;, {
      url: &#39;/&#39;,
      templateProvider: function(abTestService) { // Inject abTestService
        var result = abTestService.pick(&#39;a&#39;, &#39;b&#39;); // Pick a or b

        // home-a.html or home-b.html
        return &#39;&amp;lt;div ng-include=&amp;quot;\&#39;app/home-&#39; + result + &#39;.html\&#39;&amp;quot;&amp;gt;&amp;lt;/div&amp;gt;&#39;;
      }
    });
  }

})();
&lt;/code&gt;&lt;/pre&gt;

&lt;p&gt;To better explain the logic behind templateProvider, I created this &lt;a href=&#34;http://davidcai.github.io/blog/posts/router-dynamic-templates/&#34;&gt;post&lt;/a&gt;.&lt;/p&gt;

&lt;p&gt;&lt;br /&gt;&lt;/p&gt;
</description>
    </item>
    
    <item>
      <title>Router: Dynamic Templates</title>
      <link>http://davidcai.github.io/blog/posts/router-dynamic-templates/</link>
      <pubDate>Sat, 15 Aug 2015 00:00:00 +0000</pubDate>
      
      <guid>http://davidcai.github.io/blog/posts/router-dynamic-templates/</guid>
      <description>

&lt;p&gt;This post discusses how to create dynamic templates by leveraging the templateProvider configuration provided by Angular&amp;rsquo;s built-in router or the third-party UI Router.&lt;/p&gt;

&lt;p&gt;&lt;br /&gt;&lt;/p&gt;

&lt;h2 id=&#34;problem&#34;&gt;PROBLEM&lt;/h2&gt;

&lt;p&gt;For Single Page Applications (SPAs), we often need to switch views or states inside containers. This is usually done through routers. With either Angular&amp;rsquo;s built-in router or the popular UI Router, we are able to define the relationship between states and their templates. For instance, here we defined a state &lt;code&gt;home&lt;/code&gt; and its template URL &lt;code&gt;app/home/home.html&lt;/code&gt;:&lt;/p&gt;

&lt;pre&gt;&lt;code class=&#34;language-js&#34;&gt;app.config(function($stateProvider) {
  $stateProvider.state(&#39;home&#39;, {
    url: &#39;/&#39;,
    templateUrl: &#39;app/home/home.html&#39;
  });
});
&lt;/code&gt;&lt;/pre&gt;

&lt;p&gt;In some cases, this state-to-template relationship can not be determined beforehand at the &lt;code&gt;config&lt;/code&gt; time. The decision of what the template or template URL will be used for a state has to wait for the availability of run-time data. For example:&lt;/p&gt;

&lt;ul&gt;
&lt;li&gt;User&amp;rsquo;s account type, e.g. show Home version A for members, and version B for public users.&lt;/li&gt;
&lt;li&gt;A/B testing, e.g. a A/B testing service randomly picks from two versions &amp;ndash; A or B.&lt;/li&gt;
&lt;/ul&gt;

&lt;p&gt;In either scenario, the template cannot be fixed to &lt;code&gt;app/home/home.html&lt;/code&gt;, and has be to resolved using run-time data.&lt;/p&gt;

&lt;p&gt;Router&amp;rsquo;s &lt;code&gt;templateUrl&lt;/code&gt; configuration accepts a function which can be used to create dynamic template URL. However, we are not able to inject run-time dependencies (e.g. user services, or A/B test services) into the templateUrl function. The only available argument of the &lt;code&gt;templateUrl&lt;/code&gt; function is &lt;code&gt;$stateParams&lt;/code&gt;.&lt;/p&gt;

&lt;pre&gt;&lt;code class=&#34;language-js&#34;&gt;$stateProvider.state(&#39;home&#39;, {
  templateUrl: function($stateParams) { // Can not inject dependencies
    return &#39;app/home.&#39; + $stateParams.option + &#39;.html&#39;;
  }
});
&lt;/code&gt;&lt;/pre&gt;

&lt;p&gt;&lt;br /&gt;&lt;/p&gt;

&lt;h2 id=&#34;solution&#34;&gt;SOLUTION&lt;/h2&gt;

&lt;p&gt;The answer is &lt;code&gt;templateProvider&lt;/code&gt;.&lt;/p&gt;

&lt;p&gt;Both Angular built-in router and the UI Router have a &lt;code&gt;templateProvider&lt;/code&gt; configuration. &lt;code&gt;templateProvider&lt;/code&gt; accepts a function that can be injected with run-time dependencies.&lt;/p&gt;

&lt;pre&gt;&lt;code class=&#34;language-js&#34;&gt;$stateProvider.state(&#39;home&#39;, {
  templateProvider: function(abTestService) { // abTestService is injected here
    var result = abTestService.pick(&#39;a&#39;, &#39;b&#39;); // Choose version A or B
    return &#39;...&#39;; // Return template content based on the result
  }
});
&lt;/code&gt;&lt;/pre&gt;

&lt;p&gt;&lt;code&gt;templateProvider&lt;/code&gt; returns template content (not an URL to the template). We can certainly embed HTML markups directly in JavaScript, but for complicate HTML, it&amp;rsquo;s better to externalize the HTML content to separate template files. Here, we created &lt;code&gt;home-a.html&lt;/code&gt; and &lt;code&gt;home-b.html&lt;/code&gt;, and &lt;code&gt;ngInclude&lt;/code&gt; them in the templateProvider function:&lt;/p&gt;

&lt;pre&gt;&lt;code class=&#34;language-html&#34;&gt;&amp;lt;!-- Home version A at app/home/home-a.html --&amp;gt;
&amp;lt;div ng-controller=&amp;quot;HomeAController&amp;quot;&amp;gt;Version A&amp;lt;/div&amp;gt;

&amp;lt;!-- Home version B at app/home/home-b.html --&amp;gt;
&amp;lt;div ng-controller=&amp;quot;HomeBController&amp;quot;&amp;gt;Version B&amp;lt;/div&amp;gt;
&lt;/code&gt;&lt;/pre&gt;

&lt;pre&gt;&lt;code class=&#34;language-js&#34;&gt;$stateProvider.state(&#39;home&#39;, {
  templateProvider: function(abTestService) {
    var result = abTestService.pick(&#39;a&#39;, &#39;b&#39;);

    // ngInclude template content based on the A/B test result
    return &#39;&amp;lt;div ng-include=&amp;quot;\&#39;app/home/home-&#39; + result + &#39;.html\&#39;&amp;quot;&amp;gt;&amp;lt;/div&amp;gt;&#39;;
  }
});
&lt;/code&gt;&lt;/pre&gt;

&lt;p&gt;&lt;code&gt;templateProvider&lt;/code&gt; can also return a Promise which is resolved to template content.&lt;/p&gt;

&lt;pre&gt;&lt;code class=&#34;language-js&#34;&gt;$stateProvider.state(&#39;home&#39;, {
  templateProvider: function($http, USER_SERVICE_REST_URL) {

    // Here, we return a promise instead of the template content
    return $http.get(USER_SERVICE_REST_URL).then(function(data) {
      var result = (data.type === &#39;member&#39; ? &#39;a&#39; : &#39;b&#39;);

      // Return the template content
      return &#39;&amp;lt;div ng-include=&amp;quot;\&#39;app/home/home-&#39; + result + &#39;.html\&#39;&amp;quot;&amp;gt;&amp;lt;/div&amp;gt;&#39;;
    });
  }
});
&lt;/code&gt;&lt;/pre&gt;

&lt;p&gt;&lt;br /&gt;&lt;/p&gt;

&lt;h2 id=&#34;even-better-solution&#34;&gt;EVEN BETTER SOLUTION&lt;/h2&gt;

&lt;p&gt;Having &lt;code&gt;ngInclude&lt;/code&gt; in &lt;code&gt;templateProvider&lt;/code&gt; function feels still a bit hackish to me. The ideal solution is to specify a template URL, and then let Angular fetch the content. However, sending separate HTTP requests just to fetch templates seems to be unnecessary web traffic. It will be better if the template content can be cached in the $templateCache service; and then, all I need to do is &lt;code&gt;$templateCache.get(&#39;templateUrl&#39;)&lt;/code&gt;:&lt;/p&gt;

&lt;pre&gt;&lt;code class=&#34;language-js&#34;&gt;$stateProvider.state(&#39;home&#39;, {
  templateProvider: function(abTestService, $templateCache) {
    var result = abTestService.pick(&#39;a&#39;, &#39;b&#39;);

    // Retrieve the cached template content from $templateCache service
    return $templateCache.get(&#39;app/home/home-&#39; + result + &#39;.html&#39;);
  }
});
&lt;/code&gt;&lt;/pre&gt;

&lt;p&gt;To achieve this, we need a Gulp task to convert all HTML files under the app/ directory to JavaScript strings, and save the strings in $templateCache.&lt;/p&gt;

&lt;pre&gt;&lt;code class=&#34;language-js&#34;&gt;// Load gulp and its plugins
var gulp = require(&#39;gulp&#39;);
var minifyHtml = require(&#39;gulp-minify-html&#39;);
var angularTemplateCache = require(&#39;gulp-angular-templatecache&#39;);


gulp.task(&#39;templates&#39;, function() {

  return cacheTemplates(&#39;src/app/**/*.html&#39;, &#39;app.template.js&#39;);

  function cacheTemplates(input, output) {
    return gulp.src(input) // Get all HTML files
      .pipe(minifyHtml({ // Minify HTML content first
        empty: true,
        spare: true,
        quotes: true
      }))
      .pipe(angularTemplateCache(output, { // Save minified strings to cache
        module: &#39;myApp&#39; // Setup $templateCache for Angular module &#39;myApp&#39;
      }))
      .pipe(gulp.dest(&#39;.tmp/templates/&#39;));

  } // /function cacheTemplates

});
&lt;/code&gt;&lt;/pre&gt;

&lt;p&gt;Then, import the generated &lt;code&gt;template.js&lt;/code&gt; in &lt;code&gt;index.html&lt;/code&gt;:&lt;/p&gt;

&lt;pre&gt;&lt;code class=&#34;language-html&#34;&gt;&amp;lt;script src=&amp;quot;.tmp/templates/app.template.js&amp;quot;&amp;gt;&amp;lt;/script&amp;gt;
&lt;/code&gt;&lt;/pre&gt;

&lt;p&gt;&lt;br /&gt;&lt;/p&gt;

&lt;h2 id=&#34;conclusion&#34;&gt;CONCLUSION&lt;/h2&gt;

&lt;p&gt;By leveraging the &lt;code&gt;templateProvider&lt;/code&gt; function that can be injected with dependencies, we are able to resolve template content based on run-time data. This technique is useful for switching among more than one templates for a state, for instance, A/B testing, and swappable content in limited space.&lt;/p&gt;

&lt;p&gt;&lt;br /&gt;&lt;/p&gt;
</description>
    </item>
    
  </channel>
</rss>